<html>
	<title>Debug Game</title>
	<style>
	#moves>details {
		margin-left:1em;
	}
	</style>
	<body>
		{{if .Error}}
			<h1>Error</h1>
			{{.Error}}
		{{end}}
		{{if .Game.Finished}}
		<h1>Game over</h1>
			{{if .Game.Winners}}
			<h2>Winners:{{range .Game.Winners}}{{.}}{{end}}</h2>
			{{else}}
			<h2>It's a draw!</h2>
			{{end}}
		{{else}}
		<h3>Playing</h3>
		{{end}}
		<h2>Rendered Output</h2>
		<pre>{{.Diagram}}</pre>
		<details>
			<summary>State</summary>
			<pre>{{.State}}</pre>
		</details>
		<details>
			<summary>Chest</summary>
			<pre>{{.Chest}}</pre>
		</details>
		{{if not .Game.Finished}}
		<details id="moves">
			<summary>Moves</summary>
			{{range .Forms}}
				<details id="moves-{{.Name}}">
					<summary>Move {{.Name}}</summary>
					<form method="POST">
						<p><em>{{.Description}}</em></p>
						<input type="hidden" name="MoveType" value="{{.Name}}">
						{{range .Fields}}
							<strong>{{.Name}}</strong>
							<!-- TODO: output different form elements based on type -->
							<input name="{{.Name}}" value="{{.DefaultValue}}">
							<br/>
						{{else}}
							<em>No modifiable fields</em>
							<br/>
						{{end}}
						<input type="submit" value="Make Move">
					</form>
				</details>
			{{end}}
		</details>
		{{end}}
		<script src="/static/script.js"></script>
	</body>
</html>