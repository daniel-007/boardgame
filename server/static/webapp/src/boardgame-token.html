<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="boardgame-component.html">

<dom-module id="boardgame-token">

	<template>
		<style>
			#inner {
				height:30px;
				width: 30px;	
			}

			#inner img {
				height: 100%;
				width: 100%;
				display: none;
			}

			#outer.cube img {
				display: block;
			}

			#outer.chip #inner {
				border-radius: 1em;
			}

			#outer.active #inner {
        box-shadow:0 0 0.25em 0.25em rgba(204,204,160,1.0);
      }

      #outer.highlighted #inner{
        box-shadow:0 0 0.25em 0.25em rgba(0,0,0,1.0);
      }

      #outer.active.highlighted #inner {
        box-shadow:0 0 0.25em 0.25em rgba(255,255,0,1.0);
      }

			#outer.gray #inner {
        background-color: gray;
      }

      #outer.green #inner {
        background-color: green;
      }

      #outer.teal #inner {
        background-color: teal;
      }

      #outer.purple #inner {
        background-color: purple;
      }

      #outer.pink #inner {
        background-color: pink;
      }

      #outer.red #inner {
        background-color: red;
      }

      #outer.blue #inner {
        background-color: blue;
      }

      #outer.orange #inner {
        background-color: orange;
      }

      #outer.black #inner {
        background-color: black;
      }

      #outer.cube #inner {
      	background-color: inherit;
      }

		</style>
		<div id="import">
			<img src="{{_asset}}">
		</div>
	</template>

  <script>

  	(function() {

  		let memoizedTemplate;

	    class BoardgameToken extends BoardgameComponent {

	    	static get properties() {
	    		return {
	    			color: {
	    				type: String,
	    				value: "red",
	    			},
	    			//Active changes the styling to make it clear the thing is selcted
	    			active: Boolean,
	    			//highlighted has a different visual style than active. different
	    			//games will use it for different things.
	    			highlighted: Boolean,
	    			//The type of token. Supported values: "chip", "cube"
	    			type: {
	    				type: String,
	    				value: "chip"
	    			},
	    			_asset: {
	    				type: String,
	    				computed: "_computeAsset(type)"
	    			}
	    		}
	    	}

	      static get is() {
	        return "boardgame-token"
	      }

	      static get template() {
          if (!memoizedTemplate) {
            memoizedTemplate = BoardgameComponent.combinedTemplate(Polymer.DomModule.import(this.is, 'template'));
          }
          return memoizedTemplate;
        }

         static get observers() {
          return [
            //Update
            "_updateClasses(spacer, noShadow, interactive, disabled, noAnimate, color, highlighted, active)"
          ]
        }

        ready() {
        	super.ready();
        	this._cubeAsset = this.resolveUrl("token-cube.svg");
        }

        _computeAsset(type) {
        	switch (type) {
        		case "cube":
        			return this.resolveUrl("token-cube.svg")
        	}
        	return "";
        }

        //Override _computeClasses and add some more.
        _computeClasses() {
        	let result = [this.color];
        	if (this.active) {
        		result.push("active");
        	}
        	if (this.highlighted) {
        		result.push("highlighted");
        	}
        	result.push(this.type);
          result.push(super._computeClasses());
          return result.join(" ");
        }


	    }

	    customElements.define(BoardgameToken.is, BoardgameToken);

	  })();
  </script>
</dom-module>
