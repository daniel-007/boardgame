<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
 

<script>

  let IronAjax = customElements.get("iron-ajax");

  class BoardgameAjax extends IronAjax {

    static get is() {
      return "boardgame-ajax";
    }

    static get properties() {
      return {
        gameRoute: Object,
        url : {
          type: String,
          computed: "_computeUrl(path, gamePath, gameRoute)"
        },
        //Path for apis that aren't specific to a game, e.g. /api/auth, where
        //path would be 'auth'
        path: String,

        //Path for APIS that are part of a game, e.g.
        ///api/game/blackjack/123445/move, where gamePath would be `move`
        gamePath: String,
        //You almost always want withCredentials so set it to true.
        withCredentials: {
          type: Boolean,
          value: true,
        }
      }
    }

    _computeUrl(path, gamePath, gameRoute) {
      if (path) {
        return API_HOST + "/api/" + path;
      }
      if (gamePath && gameRoute) {
        return API_HOST + "/api/game/" + gameRoute.name + "/" + gameRoute.id + "/" + gamePath;
      }
      return "";
    }

  }

  customElements.define(BoardgameAjax.is, BoardgameAjax);

</script>
