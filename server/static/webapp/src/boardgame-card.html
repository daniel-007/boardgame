<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-styles/shadow.html">
<link rel="import" href="../bower_components/paper-styles/typography.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<dom-module id="boardgame-card">
  <template>
    <style include="iron-flex">

      .spacer {
        visibility: hidden;
      }

      #card {
        height: 4em;
        width: 6em;
        margin:1em;
        cursor: pointer;
        border-radius: 0.25em;
        overflow: hidden;
        @apply --shadow-elevation-2dp;
        @apply --shadow-transition;
      }

      #card:hover {
        @apply --shadow-elevation-8dp;
      }

      #card #front {
        display:block;
        background-color: #CCFCFC;
        height:100%;
        width:100%;
      }

      #card #back {
        display:none;
        background-color: #00CCCC;
        height:100%;
        width:100%;
      }

      #default-back {
        height:100%;
        width:120%;
        opacity: 0.2;
        font-size: 13.5px;
        line-height: 14px;
        overflow:hidden;
        text-overflow:clip;
      }

      #card.hidden  #front {
        display:none;
      }

      #card.hidden #back {
        display:block;
      }

    </style>

    <div id="card" class$="{{Classes(hidden, spacer)}}">
      <div id="front">
        <content select=".front">
          {{suit}}{{rank}}
        </content>
      </div>
      <div id="back">
        <content select=".back">
          <div id="default-back" class="layout vertical center center-justified">
                &#x2605; &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606; &#x2605;  &#x2606;
          </div>
        </content>
      </div>
    </div>
  </template>

  <script>
    Polymer({
      is: 'boardgame-card',
      properties: {
        suit: String,
        rank: String,
        index: Number,
        hidden: Boolean,
        spacer: Boolean,
      },
      listeners : {
        'tap' : 'handleTap',
      },
      handleTap: function(e) {
        if (this.spacer) {
          return;
        }
        this.fire('card-tapped', {index: this.index});
      },
      Classes: function(hidden, spacer) {
        let result = ["card"];
        if (hidden) {
          result.push("hidden");
        }
        if (spacer) {
          result.push("spacer");
        }
        return result.join(" ");
      },
    });
  </script>
</dom-module>
