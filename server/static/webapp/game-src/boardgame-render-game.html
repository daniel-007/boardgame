<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="boardgame-render-game">
  <template>
    <!--TODO: override with your own rendering here -->
    <div hidden$="{{!this.rendererLoaded}}">
      <h2>Diagram of {{gameName}}</h2>
      <pre>{{diagram}}</pre>
    </div>
    <div id="renderer">
    <!-- This is where renderer will go -->
    </div>
  </template>

  <script>
    Polymer({
      is: 'boardgame-render-game',
      properties: {
        state: Object,
        diagram : String,
        gameName: {
          type: String,
          observer: "_gameNameChanged",
        },
        rendererLoaded: Boolean,
      },
      _gameNameChanged : function(newValue) {
        this.rendererLoaded = false

        var resolvedUrl = this.resolveUrl("../game-src/boardgame-render-game-" + newValue + ".html")
        this.importHref(resolvedUrl, this._instantiateRender, null, true);
      },
      _instantiateRender : function(e) {
        //The import loaded! Add it!
        this.rendererLoaded = true;

        this.$.renderer.innerHTML = "<boardgame-render-game-" + this.gameName + "></boardgame-render-game-" + this.gameName + ">"
      }

    });
  </script>
</dom-module>
